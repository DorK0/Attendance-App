{"ast":null,"code":"import jwtDecode from \"jwt-decode\";\n// 1. State\nexport class AuthState {\n  constructor() {\n    this.token = null;\n    this.user = null;\n    this.token = sessionStorage.getItem(\"token\"); // Restore token from storage.\n    if (this.token) {\n      this.user = jwtDecode(this.token).user;\n    }\n  }\n}\n\n// 2. Action Type\nexport let AuthActionType = /*#__PURE__*/function (AuthActionType) {\n  AuthActionType[\"Register\"] = \"Register\";\n  AuthActionType[\"Login\"] = \"Login\";\n  AuthActionType[\"Logout\"] = \"Logout\";\n  return AuthActionType;\n}({});\n\n// 3. Action\n\n// 4. Action Creators\nexport function registerAction(token) {\n  const action = {\n    type: AuthActionType.Register,\n    payload: token\n  };\n  return action;\n}\nexport function loginAction(token) {\n  const action = {\n    type: AuthActionType.Login,\n    payload: token\n  };\n  return action;\n}\nexport function logoutAction() {\n  const action = {\n    type: AuthActionType.Logout\n  };\n  return action;\n}\n\n// 5. Reducer\nexport function authReducer(currentState = new AuthState(), action) {\n  const newState = {\n    ...currentState\n  };\n  switch (action.type) {\n    case AuthActionType.Register:\n    case AuthActionType.Login:\n      const token = action.payload;\n      newState.token = token;\n      newState.user = jwtDecode(token).user;\n      sessionStorage.setItem(\"token\", token); // Save token in storage.\n      break;\n    case AuthActionType.Logout:\n      newState.token = null;\n      newState.user = null;\n      sessionStorage.removeItem(\"token\"); // Clear token from storage.\n      break;\n  }\n  return newState;\n}","map":{"version":3,"names":["jwtDecode","AuthState","constructor","token","user","sessionStorage","getItem","AuthActionType","registerAction","action","type","Register","payload","loginAction","Login","logoutAction","Logout","authReducer","currentState","newState","setItem","removeItem"],"sources":["/Users/doritkiron/Downloads/Vacations Project - Dor Kiron/Frontend/src/Redux/AuthState.ts"],"sourcesContent":["import jwtDecode from \"jwt-decode\";\r\nimport UserModel from \"../Models/UserModel\";\r\n\r\n// 1. State\r\nexport class AuthState {\r\n\r\n    public token: string = null;\r\n    public user: UserModel = null;\r\n\r\n    public constructor() {\r\n        this.token = sessionStorage.getItem(\"token\"); // Restore token from storage.\r\n        if (this.token) {\r\n            this.user = (jwtDecode(this.token) as any).user;\r\n        }\r\n    }\r\n}\r\n\r\n// 2. Action Type\r\nexport enum AuthActionType {\r\n    Register = \"Register\",\r\n    Login = \"Login\",\r\n    Logout = \"Logout\"\r\n}\r\n\r\n// 3. Action\r\nexport interface AuthAction {\r\n    type: AuthActionType;\r\n    payload?: string;\r\n}\r\n\r\n// 4. Action Creators\r\nexport function registerAction(token: string): AuthAction {\r\n    const action: AuthAction = { type: AuthActionType.Register, payload: token };\r\n    return action;\r\n}\r\nexport function loginAction(token: string): AuthAction {\r\n    const action: AuthAction = { type: AuthActionType.Login, payload: token };\r\n    return action;\r\n}\r\nexport function logoutAction(): AuthAction {\r\n    const action: AuthAction = { type: AuthActionType.Logout };\r\n    return action;\r\n}\r\n\r\n// 5. Reducer\r\nexport function authReducer(currentState = new AuthState(), action: AuthAction): AuthState {\r\n\r\n    const newState = { ...currentState };\r\n\r\n    switch (action.type) {\r\n        case AuthActionType.Register:\r\n        case AuthActionType.Login:\r\n            const token = action.payload;\r\n            newState.token = token;\r\n            newState.user = (jwtDecode(token) as any).user;\r\n            sessionStorage.setItem(\"token\", token); // Save token in storage.\r\n            break;\r\n        case AuthActionType.Logout:\r\n            newState.token = null;\r\n            newState.user = null;\r\n            sessionStorage.removeItem(\"token\"); // Clear token from storage.\r\n            break;\r\n    }\r\n\r\n    return newState;\r\n\r\n}\r\n"],"mappings":"AAAA,OAAOA,SAAS,MAAM,YAAY;AAGlC;AACA,OAAO,MAAMC,SAAS,CAAC;EAKZC,WAAWA,CAAA,EAAG;IAAA,KAHdC,KAAK,GAAW,IAAI;IAAA,KACpBC,IAAI,GAAc,IAAI;IAGzB,IAAI,CAACD,KAAK,GAAGE,cAAc,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;IAC9C,IAAI,IAAI,CAACH,KAAK,EAAE;MACZ,IAAI,CAACC,IAAI,GAAIJ,SAAS,CAAC,IAAI,CAACG,KAAK,CAAC,CAASC,IAAI;IACnD;EACJ;AACJ;;AAEA;AACA,WAAYG,cAAc,0BAAdA,cAAc;EAAdA,cAAc;EAAdA,cAAc;EAAdA,cAAc;EAAA,OAAdA,cAAc;AAAA;;AAM1B;;AAMA;AACA,OAAO,SAASC,cAAcA,CAACL,KAAa,EAAc;EACtD,MAAMM,MAAkB,GAAG;IAAEC,IAAI,EAAEH,cAAc,CAACI,QAAQ;IAAEC,OAAO,EAAET;EAAM,CAAC;EAC5E,OAAOM,MAAM;AACjB;AACA,OAAO,SAASI,WAAWA,CAACV,KAAa,EAAc;EACnD,MAAMM,MAAkB,GAAG;IAAEC,IAAI,EAAEH,cAAc,CAACO,KAAK;IAAEF,OAAO,EAAET;EAAM,CAAC;EACzE,OAAOM,MAAM;AACjB;AACA,OAAO,SAASM,YAAYA,CAAA,EAAe;EACvC,MAAMN,MAAkB,GAAG;IAAEC,IAAI,EAAEH,cAAc,CAACS;EAAO,CAAC;EAC1D,OAAOP,MAAM;AACjB;;AAEA;AACA,OAAO,SAASQ,WAAWA,CAACC,YAAY,GAAG,IAAIjB,SAAS,CAAC,CAAC,EAAEQ,MAAkB,EAAa;EAEvF,MAAMU,QAAQ,GAAG;IAAE,GAAGD;EAAa,CAAC;EAEpC,QAAQT,MAAM,CAACC,IAAI;IACf,KAAKH,cAAc,CAACI,QAAQ;IAC5B,KAAKJ,cAAc,CAACO,KAAK;MACrB,MAAMX,KAAK,GAAGM,MAAM,CAACG,OAAO;MAC5BO,QAAQ,CAAChB,KAAK,GAAGA,KAAK;MACtBgB,QAAQ,CAACf,IAAI,GAAIJ,SAAS,CAACG,KAAK,CAAC,CAASC,IAAI;MAC9CC,cAAc,CAACe,OAAO,CAAC,OAAO,EAAEjB,KAAK,CAAC,CAAC,CAAC;MACxC;IACJ,KAAKI,cAAc,CAACS,MAAM;MACtBG,QAAQ,CAAChB,KAAK,GAAG,IAAI;MACrBgB,QAAQ,CAACf,IAAI,GAAG,IAAI;MACpBC,cAAc,CAACgB,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC;MACpC;EACR;EAEA,OAAOF,QAAQ;AAEnB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}